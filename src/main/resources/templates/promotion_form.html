<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
  <meta charset="UTF-8">
  <title th:text="${promotion.id == null ? 'Crear' : 'Editar'} + ' Promoción'">Formulario Promoción</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">
<div class="flex min-h-screen">
  <!-- Sidebar -->
  <div class="w-64 bg-white border-r border-gray-200 shadow-lg">
    <div class="p-4 text-xl font-bold border-b">
      <a th:href="@{/admin/dashboard}">
        <img src="/images/logo.png" alt="SmartShop" class="w-40" />
      </a>
    </div>
    <nav class="p-4 space-y-2">
      <a th:href="@{/admin/users}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700">Usuarios</a>
      <a th:href="@{/admin/orders}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700">Pedidos</a>
      <a th:href="@{/admin/quotes}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700">Cotizaciones</a>
      <a th:href="@{/admin/products}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700">Productos</a>
      <a th:href="@{/admin/promotions}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700 font-semibold">Carousel</a>
      <a th:href="@{/admin/logout}" class="block px-4 py-2 rounded hover:bg-red-100 text-red-600">Cerrar sesión</a>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="flex-1 p-6">
    <div class="text-2xl font-semibold mb-6">
      Bienvenido <span th:text="${usuario}">Administrador</span>
    </div>

    <!-- Promotion Form -->
    <div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 max-w-2xl">
      <h2 class="text-xl font-bold mb-4" th:text="${promotion.id == null ? 'Crear promoción' : 'Editar promoción'}"></h2>

      <form th:action="@{${promotion.id} == null ? '/admin/promotions/create' : '/admin/promotions/edit/' + ${promotion.id}}" method="post" th:object="${promotion}" enctype="multipart/form-data">
        <input type="hidden" th:field="*{id}">

        <div class="mb-4">
          <label class="block text-gray-700 font-semibold mb-1">Título</label>
          <input type="text" th:field="*{title}" class="border rounded w-full py-2 px-3"/>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-semibold mb-1">Fecha inicio</label>
          <input type="datetime-local" th:field="*{startDate}" class="border rounded w-full py-2 px-3"/>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-semibold mb-1">Fecha fin</label>
          <input type="datetime-local" th:field="*{endDate}" class="border rounded w-full py-2 px-3"/>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-semibold mb-1">Orden de despliegue</label>
          <input type="number" th:field="*{displayOrder}" class="border rounded w-full py-2 px-3"/>
        </div>

        <div class="mb-4">
          <label class="inline-flex items-center text-gray-700 font-semibold">
            <input type="checkbox" th:field="*{active}" class="mr-2 leading-tight">
            <span>Activa</span>
          </label>
        </div>

        <div class="mb-4">
          <label class="block text-gray-700 font-semibold mb-1">Imagen</label>
          <input type="file" name="imageFile" class="block"/>
        </div>

        <div th:if="*{id != null}" class="mb-4">
          <label class="block text-gray-700 font-semibold mb-1">Imagen actual:</label>
          <img th:src="@{'/rest/api/1/promotions/' + *{id} + '/image'}" alt="Imagen de la promoción" width="100" class="rounded shadow"/>
        </div>

        <div class="mt-6">
          <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
            Guardar
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
</body>
</html>
