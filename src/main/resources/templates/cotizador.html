<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cotizador</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex min-h-screen">

<div class="w-64 bg-white border-r border-gray-200 shadow-lg">
  <div class="p-4 text-xl font-bold border-b">
    <a th:href="@{/admin/dashboard}">
      <img src="/images/logo.png" alt="SmartShop" class="w-40" />
    </a>
  </div>
  <nav class="p-4 space-y-2">
    <a th:href="@{/admin/users}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700">Usuarios</a>
    <a th:href="@{/admin/orders}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700">Pedidos</a>
    <a th:href="@{/admin/quotes}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700 font-semibold">Cotizaciones</a>
    <a th:href="@{/admin/products}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700">Productos</a>
    <a th:href="@{/admin/promotions}" class="block px-4 py-2 rounded hover:bg-gray-100 text-gray-700 ">Carousel</a>
    <a th:href="@{/admin/logout}" class="block px-4 py-2 rounded hover:bg-red-100 text-red-600">Cerrar sesión</a>
  </nav>
</div>

<div class="py-10 w-[90%]">
  <div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow-lg">
    <h1 class="text-2xl font-bold mb-6 text-gray-800">Cotizador de Productos</h1>

    <!-- Buscador -->
    <div class="mb-6 relative">
      <input
              type="text"
              id="buscador"
              placeholder="Buscar producto por nombre o ID..."
              class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <ul id="resultados" class="absolute z-10 w-full bg-white border border-gray-300 rounded-md mt-1 max-h-64 overflow-y-auto shadow-md hidden"></ul>
    </div>


    <!-- Tabla de productos agregados -->
    <div>
      <div class="overflow-x-auto">
        <table class="w-full table-auto text-left border-collapse">
          <thead class="bg-gray-100">
          <tr>
            <th class="text-left py-2 px-4">Producto</th>
            <th class="text-right py-2 px-4">Precio</th>
            <th class="text-center py-2 px-4">Acción</th>
          </tr>
          </thead>
          <tbody id="tabla-productos"></tbody>
        </table>
      </div>

      <!-- Totales -->
      <div class="mt-6 text-right space-y-1">
        <p class="text-gray-700">Subtotal: <span id="subtotal" class="font-semibold">$0.00</span></p>
        <p class="text-gray-700">IVA (16%): <span id="iva" class="font-semibold">$0.00</span></p>
        <p class="text-xl font-bold text-gray-900">Total: <span class="text-green-600" id="total">$0.00</span></p>
      </div>
    </div>
  </div>
  <form id="formCotizacion" method="POST" action="/enviar-cotizacion" style="display:none;">
    <!-- Aquí se inyectarán inputs ocultos con datos antes de enviar -->
  </form>
  <button id="btnEnviar" class="mt-6 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">
    Enviar Cotización por Email
  </button>
</div>

<script th:inline="javascript">
  window.productosData = /*[[${productos}]]*/ [];
</script>
<script src="/js/cotizador.js"></script>

</body>
</html>
